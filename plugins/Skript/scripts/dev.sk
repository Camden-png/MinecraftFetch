# === Development Console ===

# Toggle developer mode...
command /dev:
    trigger:
        if player is not op:
            stop
        
        set {_val} to get_key(player, "dev_mode")
        if {_val} is true:
            set_key(player, "dev_mode", false)
        else:
            set_key(player, "dev_mode", true)
        
        # Update scoreboard
        set_scoreboard(player)
        toggle player's fastboard

command /debug [<text>]:
    trigger:
        clear {_target}
        clear {_metadata}

        if arg-1 is set:
            set {_target} to arg-1
            if {game::%{_target}%::metadata} is set:
                set {_metadata} to {game::%{_target}%::metadata}
            else if {level::%{_target}%::metadata} is set:
                set {_metadata} to {level::%{_target}%::metadata}
                set {_target} to "%{_target}% level"
        
        if {_metadata} is not set:
            set {_target} to player
            set {_metadata} to {game::%player%::metadata}

        set {_message} to "<gray>[<light green>Debug<gray>] <reset>%{_target}%'s data...%nl%%{_metadata}%"
        send {_message} to player

command /reset:
    trigger:
        loop players:
            _reset_player(loop-player)
        init_levels()
